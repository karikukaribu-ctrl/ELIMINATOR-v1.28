<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Eliminator</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@700;800;900&family=Zen+Maru+Gothic:wght@400;500;700&family=Yomogi&family=Kiwi+Maru:wght@400;500;700&family=Zen+Kurenaido&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles.v5.css">
</head>

<body>
  <!-- TOPBAR FIXE -->
  <header id="topBar">
    <div class="tb-left">
      <button id="btnLeft" class="tb-icon" type="button" title="Menu gauche" aria-label="Menu gauche">‚â°</button>
    </div>

    <div class="tb-center">
      <nav class="tb-nav" aria-label="Contr√¥les">
        <button id="modeToggle" class="tb-chip" type="button" aria-pressed="false">Clair</button>
        <button id="seasonCycle" class="tb-chip" type="button">Automne</button>
        <span class="tb-sep" aria-hidden="true">‚Ä¢</span>
        <button id="focusBtn" class="tb-chip tb-chip-quiet" type="button">Focus</button>
        <button id="countersBtn" class="tb-chip tb-chip-quiet" type="button">Compteurs</button>
      </nav>
    </div>

    <div class="tb-right">
      <button id="btnRight" class="tb-icon" type="button" title="Panneau droit" aria-label="Panneau droit">‚ñ¶</button>
    </div>
  </header>

  <!-- BACKDROP PANNEAUX -->
  <div id="panelBack" aria-hidden="true"></div>

  <!-- PANNEAU GAUCHE -->
  <aside id="leftPanel" class="panel panel-left" aria-label="Panneau gauche">
    <div class="panel-top">
      <div id="leftResizer" class="panelResizer left" title="Redimensionner"></div>
      <div class="panel-title">Menu</div>
      <button class="closeBtn" id="leftClose" type="button" aria-label="Fermer le panneau gauche">√ó</button>
    </div>

    <nav class="panel-tabs" aria-label="Onglets gauche">
      <button class="tabBtn active" type="button" data-lefttab="inbox">Inbox</button>
      <button class="tabBtn" type="button" data-lefttab="tasks">T√¢ches</button>
      <button class="tabBtn" type="button" data-lefttab="kiffance">Kiffance</button>
      <button class="tabBtn" type="button" data-lefttab="prefs">Pr√©f√©rences</button>
      <button class="tabBtn" type="button" data-lefttab="export">Export</button>
    </nav>

    <div class="panel-content">
      <section class="tabPage show" id="left-inbox">
        <p class="muted small">
          Une ligne = une t√¢che. Ligne en MAJUSCULES = cat√©gorie.
          ‚ÄúTitre - 6‚Äù ou ‚ÄúTitre 6‚Äù = 6 √âthorions.
        </p>

        <textarea id="inboxText" class="area" rows="8" placeholder="EXEMPLE CAT√âGORIE
Ranger bureau - 3
Appeler X 1
Lire article - 2"></textarea>

        <div class="row">
          <button id="inboxAdd" class="btn primary" type="button">Ajouter</button>
          <button id="inboxClear" class="btn ghost" type="button">Effacer champ</button>
        </div>

        <div class="divider"></div>

        <div class="row">
          <div class="muted small">Actives : <b id="statActive">0</b></div>
          <div class="muted small">Finies : <b id="statDone">0</b></div>
        </div>
      </section>

      <section class="tabPage" id="left-tasks">
        <div class="row wrap">
          <label class="muted small">Cat√©gorie</label>
          <select id="catFilter" class="select"></select>

          <label class="muted small">Vue</label>
          <select id="viewFilter" class="select">
            <option value="active">Actives</option>
            <option value="done">Finies</option>
            <option value="all">Toutes</option>
          </select>
        </div>

        <div class="list" id="taskList"></div>
      </section>

      <section class="tabPage" id="left-kiffance">
        <p class="muted small">R√©compenses surprises (base √©ditable).</p>
        <div class="row wrap">
          <input id="kiffNew" class="input" placeholder="Ajouter une kiffance‚Ä¶" />
          <button id="kiffAdd" class="btn primary" type="button">+</button>
        </div>
        <div class="list" id="kiffList"></div>
      </section>

      <section class="tabPage" id="left-prefs">
        <div class="grid2">
          <div>
            <label class="muted small">Mode</label>
            <select id="modeSel" class="select">
              <option value="clair">Clair</option>
              <option value="sombre">Sombre</option>
            </select>
          </div>

          <div>
            <label class="muted small">Saison</label>
            <select id="seasonSel" class="select">
              <option value="printemps">Printemps</option>
              <option value="ete">√ât√©</option>
              <option value="automne">Automne</option>
              <option value="hiver">Hiver</option>
              <option value="noirblanc">Noir & blanc</option>
            </select>
          </div>

          <div>
            <label class="muted small">Police</label>
            <select id="fontSel" class="select">
              <option value="yomogi">Yomogi (manuscrite)</option>
              <option value="zen">Zen Maru Gothic</option>
              <option value="kiwi">Kiwi Maru</option>
              <option value="kurenaido">Zen Kurenaido</option>
            </select>
          </div>

          <div>
            <label class="muted small">Taille (UI)</label>
            <input id="uiScale" type="range" min="14" max="18" step="1" />
          </div>

          <div class="span2">
            <label class="muted small">Barre progression</label>
            <select id="progressStyleSel" class="select">
              <option value="float">Flotte</option>
              <option value="anchored">Ancr√©e</option>
            </select>
          </div>

          <div class="span2">
            <label class="muted small">Pomodoro (minutes)</label>
            <input id="pomoQuick" class="input" type="number" min="5" max="90" step="1" />
          </div>
        </div>

        <div class="row">
          <button id="prefsApply" class="btn primary" type="button">Appliquer</button>
          <button id="prefsReset" class="btn ghost" type="button">Reset prefs</button>
        </div>
      </section>

      <section class="tabPage" id="left-export">
        <p class="muted small">Export JSON simple.</p>
        <div class="row wrap">
          <button id="exportBtn" class="btn ghost" type="button">Copier JSON</button>
          <button id="wipeBtn" class="btn danger" type="button">Reset total</button>
        </div>
        <textarea id="exportOut" class="area" rows="8" readonly></textarea>
      </section>
    </div>
  </aside>

  <!-- HUB CENTRAL -->
  <main id="hub">
    <div id="hub-inner">
      <h1 id="appTitle">ELIMINATOR</h1>
      <p id="subtitle" class="subtitle">Une qu√™te apr√®s l‚Äôautre.</p>

      <section id="progressWrap" aria-label="Progression">
        <div id="progressBar" class="progressBar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="100">
          <div id="progressFill"></div>
          <div id="progressPctIn">100%</div>
        </div>
      </section>

      <section id="missionCard" class="missionCard" aria-label="Mission">
        <div class="missionTopRow">
          <div class="missionLine" id="missionLineLeft">T√¢ches en cours (0 finies ¬∑ 0/0)</div>

          <div class="missionRight">
            <div class="pomoInline" aria-label="Pomodoro">
              <span id="pomoTime" class="pomoTimeInline" title="Cliquer = play/pause">25:00</span>
              <button id="pomoEdit" class="pomoEditInline" type="button" title="Param√®tres pomodoro" aria-label="Param√®tres pomodoro">‚úé</button>
            </div>
            <div id="statusSpot" class="statusSpot" aria-live="polite"></div>
          </div>
        </div>

        <div class="missionTitle" id="taskTitle">Aucune t√¢che s√©lectionn√©e</div>

        <div class="missionMeta muted" id="taskMetaDetails" hidden>
          Cat√©gorie : <span id="metaCat">‚Äî</span> ¬∑ √âthorions : <span id="metaEt">‚Äî</span>
        </div>

        <div class="missionActionsRow">
          <button id="undoBtn" class="actionPill" type="button" title="Retour arri√®re">
            ‚Ü∂ <span>Retour</span>
          </button>

          <button id="rouletteBtn" class="rouletteBtn" type="button" aria-label="Roulette">
            <div class="rouletteWheel" id="rouletteWheel">
              <div class="rouletteCenterText">Roulette</div>
            </div>
          </button>

          <button id="bombBtn" class="actionPill bomb" type="button" title="D√©gommer 1 √âthorion">
            üí£ <span>D√©gommer 1 √âthorion</span>
          </button>
        </div>

        <div class="miniLinks" role="navigation" aria-label="Acc√®s rapides">
          <button class="miniLink" type="button" id="openNotes">Notes</button>
          <button class="miniLink" type="button" id="openTyphonse">Typhonse</button>
          <button class="miniLink" type="button" id="openKiffance">Kiffance</button>
          <button class="miniLink" type="button" id="openStats">Stats</button>
          <button class="miniLink mutedLink" type="button" id="taskInfoBtn">D√©tails</button>
        </div>
      </section>
    </div>
  </main>

  <!-- PANNEAU DROIT -->
  <aside id="rightPanel" class="panel panel-right" aria-label="Panneau droit">
    <div class="panel-top">
      <div class="panel-title">Panneau</div>
      <div id="rightResizer" class="panelResizer right" title="Redimensionner"></div>
      <button class="closeBtn" id="rightClose" type="button" aria-label="Fermer le panneau droit">√ó</button>
    </div>

    <nav class="panel-tabs" aria-label="Onglets droit">
      <button class="tabBtn active" type="button" data-righttab="sets">Sets</button>
      <button class="tabBtn" type="button" data-righttab="habits">Habitudes</button>
      <button class="tabBtn" type="button" data-righttab="mood">Mood</button>
      <button class="tabBtn" type="button" data-righttab="calendar">Calendrier</button>
      <button class="tabBtn" type="button" data-righttab="notes">Notes</button>
      <button class="tabBtn" type="button" data-righttab="stats">Stats</button>
    </nav>

    <div class="panel-content">
      <!-- SETS -->
      <section class="tabPage show" id="right-sets">
        <div class="muted small">Sets = collections d‚Äôitems (checklist). Base fonctionnelle.</div>

        <div class="divider"></div>

        <div class="row wrap">
          <input id="setNewName" class="input" placeholder="Nouveau set‚Ä¶" />
          <button id="setAddBtn" class="btn primary" type="button">+</button>
        </div>

        <div class="row wrap">
          <label class="muted small">Set actif</label>
          <select id="setSelect" class="select"></select>
          <button id="setRenameBtn" class="btn ghost" type="button">Renommer</button>
          <button id="setDeleteBtn" class="btn danger" type="button">Supprimer</button>
        </div>

        <div class="divider"></div>

        <div class="row wrap">
          <input id="setItemInput" class="input" placeholder="Ajouter un item‚Ä¶" />
          <button id="setItemAddBtn" class="btn primary" type="button">Ajouter</button>
        </div>

        <div class="list" id="setItemsList"></div>
      </section>

      <!-- HABITS -->
      <section class="tabPage" id="right-habits">
        <div class="muted small">
          Habitudes = objectifs quotidiens simples. + / ‚àí pour compter, streak si objectif atteint.
        </div>

        <div class="divider"></div>

        <div class="grid2">
          <div class="span2">
            <label class="muted small">Nouvelle habitude</label>
            <div class="row wrap" style="margin-top:6px">
              <input id="habitNameInput" class="input" placeholder="Ex: 10 min lecture" />
              <input id="habitTargetInput" class="input" type="number" min="1" max="99" step="1" value="1" title="Objectif/jour">
              <button id="habitAddBtn" class="btn primary" type="button">Ajouter</button>
            </div>
          </div>

          <div>
            <label class="muted small">Filtre</label>
            <select id="habitFilterSel" class="select">
              <option value="all">Toutes</option>
              <option value="active">Actives</option>
              <option value="archived">Archiv√©es</option>
            </select>
          </div>

          <div>
            <label class="muted small">Tri</label>
            <select id="habitSortSel" class="select">
              <option value="recent">R√©centes</option>
              <option value="streak">Streak</option>
              <option value="name">Nom</option>
            </select>
          </div>
        </div>

        <div class="divider"></div>

        <div class="row wrap" style="margin-top:0">
          <div class="muted small">Aujourd‚Äôhui :</div>
          <div class="muted small"><b id="habitTodayLabel">‚Äî</b></div>
          <button id="habitsResetTodayBtn" class="btn ghost" type="button">Reset du jour</button>
        </div>

        <div class="list" id="habitsList"></div>
      </section>

      <section class="tabPage" id="right-mood">
        <p class="muted small">Mood (module suivant).</p>
      </section>

      <section class="tabPage" id="right-calendar">
        <p class="muted small">Calendrier (module suivant).</p>
      </section>

      <section class="tabPage" id="right-notes">
        <p class="muted small">Notes (raccourci : utilise ‚ÄúNotes‚Äù au centre).</p>
      </section>

      <section class="tabPage" id="right-stats">
        <p class="muted small">Stats (raccourci : utilise ‚ÄúStats‚Äù au centre).</p>
      </section>
    </div>
  </aside>

  <!-- BACKDROP MODALES -->
  <div id="modalBack" class="modalBack" hidden></div>

  <!-- MODAL POMODORO -->
  <div id="pomoModal" class="modal" hidden role="dialog" aria-modal="true" aria-label="Param√®tres pomodoro">
    <div class="modalHead">
      <div class="modalTitle">Param√®tres Pomodoro</div>
      <button id="modalClose" class="modalClose" type="button" aria-label="Fermer">√ó</button>
    </div>
    <div class="modalBody">
      <div class="grid2">
        <div>
          <label class="muted small">Pomodoro (min)</label>
          <input id="pomoMinutes" class="input" type="number" min="5" max="90" step="1">
        </div>
        <div>
          <label class="muted small">Pause (min)</label>
          <input id="breakMinutes" class="input" type="number" min="1" max="30" step="1">
        </div>
        <div class="span2">
          <label class="muted small">Auto-start apr√®s fin (Pomodoro ‚áÑ Pause)</label>
          <select id="autoStartSel" class="select">
            <option value="auto">Automatique</option>
            <option value="manual">Manuel</option>
          </select>
        </div>
      </div>

      <div class="row">
        <button id="pomoApply" class="btn primary" type="button">Appliquer</button>
        <button id="pomoReset" class="btn ghost" type="button">Reset timer</button>
      </div>
    </div>
  </div>

  <!-- OVERLAY CENTRAL (Notes / Typhonse / Kiffance / Stats) -->
  <div id="overlayModal" class="modal modalOverlay" hidden role="dialog" aria-modal="true" aria-label="Fen√™tre centrale">
    <div class="modalHead">
      <div class="modalTitle" id="overlayTitle">Fen√™tre</div>
      <button id="overlayClose" class="modalClose" type="button" aria-label="Fermer">√ó</button>
    </div>

    <div class="modalBody modalBodyScroll">
      <section id="overlay-notes" class="overlayPage" hidden>
        <label class="muted small">Notes (auto-sauvegarde)</label>
        <textarea id="notesArea" class="area" rows="10" placeholder="√âcris ici. Le chaos n‚Äôa pas de droits d‚Äô√©dition."></textarea>

        <div class="divider"></div>

        <label class="muted small">Rappels / aide-m√©moire</label>
        <textarea id="remindersArea" class="area" rows="6" placeholder="‚Ä¢ Demain : ...
‚Ä¢ √Ä ne pas oublier : ..."></textarea>
      </section>

      <section id="overlay-typhonse" class="overlayPage" hidden>
        <p class="muted small">Typhonse = liste rapide. Auto-sauvegarde.</p>

        <div class="row wrap">
          <input id="typhonseInput" class="input" placeholder="Ajouter un item Typhonse‚Ä¶" />
          <button id="typhonseAdd" class="btn primary" type="button">Ajouter</button>
        </div>

        <div class="list" id="typhonseList"></div>

        <div class="divider"></div>

        <button id="typhonseClearDone" class="btn ghost" type="button">Retirer les coch√©s</button>
      </section>

      <section id="overlay-kiffance" class="overlayPage" hidden>
        <p class="muted small">Banque de kiffances (lecture + √©dition rapide).</p>

        <div class="row wrap">
          <input id="kiffOverlayInput" class="input" placeholder="Ajouter une kiffance‚Ä¶" />
          <button id="kiffOverlayAdd" class="btn primary" type="button">Ajouter</button>
        </div>

        <div class="list" id="kiffOverlayList"></div>

        <div class="divider"></div>
        <button id="kiffRoll" class="btn ghost" type="button">Tirer une kiffance</button>
      </section>

      <section id="overlay-stats" class="overlayPage" hidden>
        <p class="muted small">Stats (module l√©ger pour l‚Äôinstant).</p>

        <div class="grid2">
          <div class="cardRow">
            <div class="cardLeft">
              <div class="cardTitle" id="statsActiveBig">0</div>
              <div class="cardSub">T√¢ches actives</div>
            </div>
          </div>

          <div class="cardRow">
            <div class="cardLeft">
              <div class="cardTitle" id="statsDoneBig">0</div>
              <div class="cardSub">T√¢ches finies</div>
            </div>
          </div>

          <div class="cardRow span2">
            <div class="cardLeft">
              <div class="cardTitle" id="statsPctBig">100%</div>
              <div class="cardSub">Progression restante (barre)</div>
            </div>
          </div>
        </div>

        <div class="divider"></div>
        <textarea id="statsDump" class="area" rows="8" readonly></textarea>
      </section>
    </div>
  </div>

  <script src="state.v5.js" defer></script>
</body>
</html>
